<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.hzero.infra.mapper.OrderMapper">

    <!--<resultMap id="BaseResultMap" type="org.hzero.api.dto.OrderRecodeDTO">-->
        <!--<result column="order_number" property="orderNumber" jdbcType="VARCHAR"/>-->
        <!--<result column="company_name" property="companyName" jdbcType="VARCHAR"/>-->
        <!--<result column="customer_name" property="customerName" jdbcType="VARCHAR"/>-->
        <!--<result column="order_date" property="orderDate" jdbcType="DATE"/>-->
        <!--<result column="order_status" property="orderStatus" jdbcType="VARCHAR"/>-->
        <!--<result column="netAmount" property="netAmount" jdbcType="DECIMAL"/>-->
        <!--<result column="description" property="itemDescription" javaType="VARCHAR"/>-->
    <!--</resultMap>-->

    <!--复杂查询-->
    <!--<select id="multiQuery" resultType="org.hzero.api.dto.OrderRecodeDTO" >-->
        <!--SELECT-->
  <!--sh.order_number,-->
  <!--cp.company_name,-->
  <!--cs.customer_name,-->
  <!--sh.order_status,-->
 <!--floor(sl.order_quantity*sl.unit_selling_price) line_amount-->
 <!--FROM-->
  <!--hodr_so_header sh,-->
  <!--hodr_company cp,-->
  <!--hodr_customer cs,-->
 <!--hodr_so_line sl,-->
 <!--hodr_item it-->
 <!--where sh.so_header_id = sl.so_header_id-->
<!--and sh.company_id = cp.company_id-->
<!--and sh.customer_id = cs.customer_id-->
<!--and it.item_id = sl.item_id-->

   <!--<if test="orderNumber != null and orderNumber != ''">-->
        <!--and  sh.order_number = #{orderNumber}-->
    <!--</if>-->
        <!--<if test="companyName!=null and companyName != ''" >-->
            <!--and  cp.company_name = #{companyName}-->
        <!--</if>-->
        <!--<if test="customerName!= null and customerName != ''" >-->
            <!--and cs.customer_name = #{customerName}-->
        <!--</if>-->
        <!--<if test="orderStatus!=null and orderStatus != '' " >-->
            <!--and sh.order_status = #{orderStatus}-->
        <!--</if>-->
        <!--<if test="itemCode!=null and itemCode != ''">-->
            <!--and it.item_code = #{itemCode}-->
        <!--</if>-->

    <!--</select>-->

    <!--&lt;!&ndash;查询数据订单&ndash;&gt;-->
    <!--<select id="queryOrderInfo" resultType="org.hzero.api.dto.OrderDto">-->
        <!--SELECT-->
        <!--sh.order_number,-->
        <!--cp.company_name,-->
        <!--cs.customer_name,-->
        <!--sh.order_date,-->
        <!--sh.order_status,-->
        <!--am.order_amount,-->
        <!--sl.line_number,-->
        <!--it.item_code,-->
        <!--it.item_description,-->
        <!--sl.order_quantity_uom,-->
        <!--sl.unit_selling_price,-->
        <!--(sl.unit_selling_price*sl.order_quantity) line_amount-->
        <!--from-->
        <!--hodr_company cp,-->
        <!--hodr_customer cs,-->
        <!--hodr_item it,-->
        <!--hodr_so_header sh,-->
        <!--hodr_so_line sl,-->
        <!--(select sl.so_header_id,sum(sl.unit_selling_price) order_amount from hodr_so_line sl,hodr_so_header sh-->
        <!--where sl.so_header_id = sh.so_header_id-->
        <!--group by sl.so_header_id) am-->
        <!--where sh.so_header_id = sl.so_header_id-->
        <!--and sh.company_id = cp.company_id-->
        <!--and sh.customer_id = cs.customer_id-->
        <!--and it.item_id = sl.item_id-->
        <!--and am.so_header_id = sh.so_header_id-->

  <!--<if test="orderNumber != null and orderNumber != '' ">-->
      <!--and sh.order_number = #{orderNumber}-->
  <!--</if>-->
  <!--<if test="companyName != null and companyName != '' ">-->
      <!--and cp.company_name like #{companyName}-->
  <!--</if>-->
  <!--<if test="customerName != null and customerName != ''">-->
      <!--and cs.customer_name like #{customerName}-->
  <!--</if>-->
  <!--<if test="orderDate != null and orderDate != '' ">-->
      <!--and sh.order_date = #{orderDate}-->
  <!--</if>-->
  <!--<if test="orderStatus != null and orderStatus != '' ">-->
      <!--and sh.order_status = #{orderStatus}-->
  <!--</if>-->
  <!--<if test="lineNumber != null and lineNumber != '' ">-->
      <!--and sl.line_number = #{lineNumber}-->
  <!--</if>-->
  <!--<if test="itemCode != null and itemCode != '' ">-->
      <!--and it.item_code = #{itemCode}-->
  <!--</if>-->
  <!--<if test="itemDescription != null and itemDescription != '' ">-->
      <!--and it.item_description like #{itemDescription}-->
  <!--</if>-->
  <!--<if test="orderquantityUom != null and orderquantityUom != '' ">-->
      <!--and sl.order_quantity_uom = #{orderquantityUom}-->
  <!--</if>-->
  <!--<if test="unitSellingPrice != null and unitSellingPrice != ''">-->
      <!--and sl.unit_selling_price = #{unitSellingPrice}-->
  <!--</if>-->

    <!--</select>-->

    <!--&lt;!&ndash;查询详细&ndash;&gt;-->
    <!--<select id="queryDetail" resultType="org.hzero.api.dto.OrderRecodeDTO">-->

        <!--SELECT-->
        <!--sh.order_number,-->
        <!--cp.company_name,-->
        <!--cs.customer_name,-->
        <!--sh.order_date,-->
        <!--sh.order_status,-->
        <!--am.order_amount,-->
        <!--sl.line_number,-->
        <!--it.item_code,-->
        <!--it.item_description,-->
        <!--sl.order_quantity_uom,-->
        <!--sl.unit_selling_price,-->
        <!--(sl.unit_selling_price*sl.order_quantity) line_amount-->
        <!--from-->
        <!--hodr_company cp,-->
        <!--hodr_customer cs,-->
        <!--hodr_item it,-->
        <!--hodr_so_header sh,-->
        <!--hodr_so_line sl,-->
        <!--(select sl.so_header_id,sum(sl.unit_selling_price) order_amount from hodr_so_line sl,hodr_so_header sh-->
        <!--where sl.so_header_id = sh.so_header_id-->
        <!--group by sl.so_header_id) am-->
        <!--where sh.so_header_id = sl.so_header_id-->
        <!--and sh.company_id = cp.company_id-->
        <!--and sh.customer_id = cs.customer_id-->
        <!--and it.item_id = sl.item_id-->
        <!--and am.so_header_id = sh.so_header_id-->

        <!--<if test="orderNumber != null and orderNumber != '' ">-->
            <!--and sh.order_number = #{orderNumber}-->
        <!--</if>-->
    <!--</select>-->

    <!--&lt;!&ndash;导出数据&ndash;&gt;-->
    <!--<select id="exportData" resultType="org.hzero.api.dto.OrderRecodeDTO">-->
        <!--SELECT-->
        <!--sh.order_number,-->
        <!--cp.company_name,-->
        <!--cs.customer_name,-->
        <!--sh.order_date,-->
        <!--sh.order_status,-->
        <!--am.order_amount,-->
        <!--sl.line_number,-->
        <!--it.item_code,-->
        <!--it.item_description,-->
        <!--sl.order_quantity_uom,-->
        <!--sl.unit_selling_price,-->
        <!--(sl.unit_selling_price*sl.order_quantity) line_amount-->
        <!--from-->
        <!--hodr_company cp,-->
        <!--hodr_customer cs,-->
        <!--hodr_item it,-->
        <!--hodr_so_header sh,-->
        <!--hodr_so_line sl,-->
        <!--(select sl.so_header_id,sum(sl.unit_selling_price*sl.order_quantity) order_amount from hodr_so_line sl,hodr_so_header sh-->
        <!--where sl.so_header_id = sh.so_header_id-->
        <!--group by sl.so_header_id) am-->
        <!--where sh.so_header_id = sl.so_header_id-->
        <!--and sh.company_id = cp.company_id-->
        <!--and sh.customer_id = cs.customer_id-->
        <!--and it.item_id = sl.item_id-->
        <!--and am.so_header_id = sh.so_header_id-->


        <!--<if test="orderNumber != null and orderNumber != '' ">-->
            <!--and sh.order_number = #{orderNumber}-->
        <!--</if>-->
        <!--<if test="companyName != null and companyName != '' ">-->
            <!--and cp.company_name like #{companyName}-->
        <!--</if>-->
        <!--<if test="customerName != null and customerName != ''">-->
            <!--and cs.customer_name like #{customerName}-->
        <!--</if>-->
        <!--<if test="orderDate != null and orderDate != '' ">-->
            <!--and sh.order_date = #{orderDate}-->
        <!--</if>-->
        <!--<if test="orderStatus != null and orderStatus != '' ">-->
            <!--and sh.order_status = #{orderStatus}-->
        <!--</if>-->
        <!--<if test="lineNumber != null and lineNumber != '' ">-->
            <!--and sl.line_number = #{lineNumber}-->
        <!--</if>-->
        <!--<if test="itemCode != null and itemCode != '' ">-->
            <!--and it.item_code = #{itemCode}-->
        <!--</if>-->
        <!--<if test="itemDescription != null and itemDescription != '' ">-->
            <!--and it.item_description like #{itemDescription}-->
        <!--</if>-->
        <!--<if test="orderquantityUom != null and orderquantityUom != '' ">-->
            <!--and sl.order_quantity_uom = #{orderquantityUom}-->
        <!--</if>-->
        <!--<if test="unitSellingPrice != null and unitSellingPrice != ''">-->
            <!--and sl.unit_selling_price = #{unitSellingPrice}-->
        <!--</if>-->
    <!--</select>-->


    <!--&lt;!&ndash;视图测试&ndash;&gt;-->
    <!--<select id="testQuery" resultType="org.hzero.api.dto.OrderDto">-->
        <!--select * from order_info;-->
    <!--</select>-->


    <!--&lt;!&ndash;<insert id="creatOrderInfo" parameterType="org.hzero.api.dto.OrderDto">&ndash;&gt;&ndash;&gt;-->
        <!--&lt;!&ndash;insert  into  order_info values (&ndash;&gt;-->
          <!--&lt;!&ndash;<if test="orderNumber != null and orderNunber != '' ">&ndash;&gt;-->
              <!--&lt;!&ndash;order_number = #{orderNumber}&ndash;&gt;-->
          <!--&lt;!&ndash;</if>&ndash;&gt;-->


        <!--&lt;!&ndash;)&ndash;&gt;-->

    <!--&lt;!&ndash;</insert>&ndash;&gt;-->

    <!--&lt;!&ndash;编辑订单&ndash;&gt;-->
    <!--<update id="updateOrder">-->
        <!--UPDATE-->
        <!--hodr_so_header,hodr_so_line-->
        <!--SET hodr_so_header.company_id = #{companyId},-->
            <!--hodr_so_header.customer_id = #{customerId},-->
            <!--hodr_so_header.order_date = #{orderDate},-->
		    <!--hodr_so_line.item_id = #{itemId},-->
		    <!--hodr_so_line.order_quantity = #{orderQuantity},-->
		    <!--hodr_so_line.unit_selling_price = #{unitSellingPrice}-->
        <!--WHERE-->
        <!--hodr_so_header.so_header_id = hodr_so_line.so_header_id-->
        <!--AND hodr_so_header.order_number = #{orderNumber}-->
        <!--AND hodr_so_line.line_number = #{lineNumber}-->
    <!--</update>-->





</mapper>
